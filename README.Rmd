# Dotaro Font

[![Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)

**Warning:** this project is a Work-in-Progress.

```{r hidden, echo = FALSE}
knitr::opts_chunk$set(fig.path = "man/figures/README-", fig.cap = '', fig.height = 1.1)

df_index <- function(ranks) {

	suits <- c("\u2660", "\u2665", "\u2666", "\u2663") # ♠ ♥ ♦ ♣
	suit_fills <- c("#009E73", "#D55E00", "#D55E00", "#009E73")
	# suit_fills <- rep_len("white", 4L)

	n_cards <- length(ranks)
	suit_idx <- ((seq_len(n_cards) - 1L) %% 4L) + 1L

	df_ranks <- data.frame(
		card = seq_len(n_cards),
		type = "rank",
		glyph = ranks,
		col = "black",
		fill = suit_fills[suit_idx]
	)
	df_suits <- data.frame(
		card = seq_len(n_cards),
		type = "suit",
		glyph = suits[suit_idx],
		col = "black",
		fill = suit_fills[suit_idx]
	)
	rbind(df_ranks, df_suits)
}
```

### Table of Contents

* [Overview](#overview)
* [Downloadable font files](#downloads)
* [Examples](#examples)
* [Unicode block coverage](#blocks)
* [License](#license)
* [Build the fonts from scratch](#build)
* [Related links](#related)

## <a name="overview">Overview</a>

The main goal is to create a couple of fonts with bespoke glyphs to use in my [Dotaro Deck](https://github.com/trevorld/dotaro.deck) of playing cards:

### Dotaro Narrow

* A narrow monospace font to provide *rank* symbols in playing card [corner indices](https://www.wopc.co.uk/playing-cards/corner-indices):

  + Digits especially 0&ndash;10

    - Include a special 10 glyph in the Private Use Area
    - Possibly include digits in an alternative style (perhaps in the [Mathematical Alphanumeric Symbols](https://en.wikipedia.org/wiki/Mathematical_Alphanumeric_Symbols) block).

  + Capital letters especially J, C, Q, K, A
  + Chess symbols especially ♟, ♞, ♛, ♚

* Should look good when rendered with a border and a colored fill with R's [`fillStrokeGrob()`](https://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.stroke.html) at a target size of 1/4&Prime; &times; 3/8&Prime;.
* Mainly [slab serif](https://en.wikipedia.org/wiki/Slab_serif).

### Dotaro Square

* A square monospace font to provide *suit* symbols in playing card corner indices and pips:

  + The French suits: &spades;, &hearts;, &diams;, &clubs;
  + Circled digits especially those from 0&ndash;4

* Should look good when rendered with a border and a colored fill with R's [`fillStrokeGrob()`](https://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.stroke.html) at a target size of 1/4&Prime; &times; 1/4&Prime;.
* If time permits may also evolve to serve as a general board game diagram font (i.e. a prettier vector version of my [Game Bit Mono Font](https://github.com/trevorld/game-bit-font)).

## <a name="downloads">Downloadable Font Files</a>

* [dotaro-narrow.ttf](https://trevorldavis.com/share/fonts/dotaro-narrow.ttf)
* [dotaro-square.ttf](https://trevorldavis.com/share/fonts/dotaro-square.ttf)
* [dotaro-narrow-code-charts.pdf](https://trevorldavis.com/share/fonts/dotaro-narrow-code-charts.pdf)
* [dotaro-square-code-charts.pdf](https://trevorldavis.com/share/fonts/dotaro-square-code-charts.pdf)

## <a name="examples">Examples</a>

**Note:** Although *Dotaro Narrow* and *Dotaro Square* are **monochrome** fonts in the examples below I use R's [`fillStrokeGrob()`](https://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.stroke.html) to rendered colored versions of the glyphs with outlines.

```{r numerals, echo=FALSE, fig.alt = "The digits in Dotaro Narrow shown as card indices"}
df <- df_index(as.character(0:9))
dotaro.font:::grid.index(df, bleed = "white")
```
```{r face_letters, echo=FALSE, fig.alt = "Some capital letters in Dotaro Narrow shown as card indices"}
df <- df_index(c("\uf590", "J", "C", "Q", "K", "A"))
dotaro.font:::grid.index(df, bleed = "white")
```
```{r face_chess, echo=FALSE, fig.alt = "Some chess glyphs in Dotaro Narrow shown as card indices"}
df <- df_index(c("\u265f", "\u265e", "\u265d", "\u265c", "\u265b", "\u265a"))
dotaro.font:::grid.index(df, bleed = "white")
```

## <a name="blocks">Unicode block coverage</a>

Current [Unicode block](https://en.wikipedia.org/wiki/Unicode_block) coverage (excluding control codes):

```{r blocks, echo=FALSE, eval=requireNamespace("Unicode", quietly = TRUE), results='asis'}
reticulate::use_python(Sys.which("python3"))
library("Unicode")
# assumes fonts in `share` directory
stopifnot(file.exists("share/dotaro-square.ttf"),
          file.exists("share/dotaro-narrow.ttf"))
points_square <- dotaro.font:::get_unicode_code_points("share/dotaro-square.ttf") |> as.u_char()
points_narrow <- dotaro.font:::get_unicode_code_points("share/dotaro-narrow.ttf") |> as.u_char()
blocks <- u_blocks()
n_per_block <- lapply(blocks, n_of_u_chars)
n_per_block[["Basic Latin"]] <- 128L - 33L # Don't count control codes
n_per_block[["Latin-1 Supplement"]] <- 128L - 34L # Don't count control codes

n_per_block_square <- lapply(blocks, \(x) sum(points_square %in% as.u_char(x)))
n_per_block_narrow <- lapply(blocks, \(x) sum(points_narrow %in% as.u_char(x)))
positive_square <- Filter(as.logical, n_per_block_square) |> names()
positive_narrow <- Filter(as.logical, n_per_block_narrow) |> names()
shared_blocks <- union(positive_square, positive_narrow)

n_per_block <- n_per_block[shared_blocks]
n_per_block_square <- n_per_block_square[shared_blocks]
n_per_block_narrow <- n_per_block_narrow[shared_blocks]
df <- data.frame(Block = names(n_per_block),
                 `Dotaro Narrow` = as.integer(n_per_block_narrow),
                 `Dotaro Square` = as.integer(n_per_block_square),
                 `Total in Block` = as.integer(n_per_block), check.names = FALSE)
knitr::kable(df)
```

## <a name="license">License</a>

This R package is licensed under the MIT license.

The Dotaro Font files generated by this R package are licensed under the [SIL Open Font License, Version 1.1](https://openfontlicense.org/).

## <a name="build">Build the fonts from scratch</a>

Install the R package with

```r
remotes::install_github("trevorld/dotaro.font")
```

Also install [FontForge](https://fontforge.org/en-US/) and its python bindings e.g. `apt install fontforge python3-fontforge` on Debian-based Linux distributions.

Run the following R code

```r
library("dotaro.font")
reticulate::use_python(Sys.which("python3"))

generate_sfd("narrow", "dotaro_narrow.sfd")
generate_font("dotaro_narrow.sfd", "dotaro_narrow.ttf")

generate_sfd("square", "dotaro_square.sfd")
generate_font("dotaro_square.sfd", "dotaro_square.ttf")
```

**Warning:** I've noticed it may not update a previously generated font unless run in a clean R session.

## <a name="related">Related links</a>

### FontForge:

* [FontForge Site](https://fontforge.org/en-US/)

  + [Python Scripting](https://fontforge.org/docs/scripting/python.html)
  + [Technical References](https://fontforge.org/docs/techref.html)

* [Design With FontForge](http://designwithfontforge.com/en-US/index.html)

  + [The Final Output, Generating Font Files](http://designwithfontforge.com/en-US/The_Final_Output_Generating_Font_Files.html)
  + [Importing Glyphs from Other Programs](http://designwithfontforge.com/en-US/Importing_Glyphs_from_Other_Programs.html)

* [Creating Fonts with Inkscape and FontForge](https://www.reddit.com/r/neography/comments/818364/creating_fonts_with_inkscape_and_fontforge_table/)

  + [FontForge Scripting](https://www.reddit.com/r/neography/comments/83ovk7/creating_fonts_with_inkscape_and_fontforge_part10/)

### Fonts and glyphs

#### Chess fonts and glyphs

* [chessvariants.com: Chess Word Macros & Fonts](https://www.chessvariants.com/d.font/fonts.html)
* [chessvariants.com: Unicode Fonts with Chess Piece Images](https://www.chessvariants.com/d.font/unicode.html)
* [enpassant.dk: Chess Fonts](https://www.enpassant.dk/chess/fonteng.htm)
* [lichess.org: svg images](https://github.com/lichess-org/lila/tree/master/public/piece)
* [Luc Devroye: Chess fonts](https://luc.devroye.org/chess.html)

#### Playing card fonts and glyphs

Collections of links:

* [Luc Devroye: Playing card fonts](https://luc.devroye.org/cards.html)
* [pagat.com links: Bitmaps, fonts, programming tools](https://www.pagat.com/links/images.html)

Select playing card fonts:

* [Card Characters](https://www.haroldsfonts.com/font/card-characters)
* [Cards Font](https://www.fontspace.com/cards-font-f3690)
* [Cards TrueType Font](https://www.pagat.com/com/cardsttf.html)
* [Fortune Letters and Widgets](https://www.fontmonkey.com/archive.php?font=fortune) (i.e. the [Decktet](https://www.decktet.com/) fonts)
* [Hoyle Playing Cards](https://www.fontspace.com/hoyle-playing-cards-font-f3686)
* [JQKAs Wild](https://www.fontspace.com/jqkas-wild-font-f96423)
* [Numbers: Deuce](https://www.typography.com/fonts/numbers/)

#### Other Slab Serif fonts

* [Amazing Slab](https://www.dafont.com/amazing-slab.font)
* [Arvo](https://fonts.google.com/specimen/Arvo)
* [Bondie Condensed Slab Serif](https://craftsupply.co/product/bondie-condensed-slab-serif-font/)
* [Cabo Slad](https://www.dafont.com/cabo-slab.font)
* [Jerome Condensed Slab Serif](https://www.dafont.com/jerome.font)
* [Luna](https://creativemarket.com/orcacreative/866559-Luna)
* [Memphis](https://en.wikipedia.org/wiki/Memphis_(typeface))
* [Neutraface Slab](https://housefonts.com/hi/neutraface_slab)
* [Rockwell](https://en.wikipedia.org/wiki/Rockwell_(typeface)) (i.e. [Geometric Slabserif 712](https://www.fontspring.com/fonts/paratype/geometric-slabserif-712?srsltid=AfmBOoof4JDryBjju-n4XtArWi5hKfHLe0PSqIyud8oR8rJApCCd3gJC))
* [Servat](https://fontlot.com/servat-font/)
* [Stymie](https://www.youworkforthem.com/font/T1050/stymie/typetester/)
* [Winchester Condensed](https://www.creativefabrica.com/product/winchester-condensed/)
* [Zilla Slab](https://fonts.google.com/specimen/Zilla+Slab/tester) ([blog post](https://blog.mozilla.org/opendesign/zilla-slab-common-language-shared-font/))

#### Square fonts

* [Game Bit Mono](https://github.com/trevorld/game-bit-font/)
* [Kreative Square](https://www.kreativekorp.com/software/fonts/ksquare/)

#### Other fonts

* [Catrinity](https://catrinity-font.de/)
* [Fairfax HD](https://www.kreativekorp.com/software/fonts/fairfaxhd/)
* [Nishiki-teki](https://umihotaru.work/)
* [Quivira](http://quivira-font.com/)
